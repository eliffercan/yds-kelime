<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>YDS Pro - Kelime Avcƒ±sƒ±</title>
    <style>
        :root {
            --primary: #4a90e2;
            --secondary: #f5f6fa;
            --text: #2c3e50;
            --success: #2ecc71;
            --error: #e74c3c;
            --card-bg: #ffffff;
            --dark-overlay: rgba(0,0,0,0.8);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
            background-color: var(--secondary);
            color: var(--text);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 15px;
            overscroll-behavior: none;
        }

        .container {
            background-color: var(--card-bg);
            width: 100%;
            max-width: 600px;
            padding: 25px;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            text-align: center;
            position: relative;
            display: flex;
            flex-direction: column;
            min-height: 80vh; 
        }

        .header-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .settings-btn {
            background: none;
            border: none;
            font-size: 24px;
            cursor: pointer;
            color: var(--primary);
            padding: 5px;
        }

        h1 {
            color: var(--primary);
            margin: 0;
            font-size: 22px;
        }

        .progress-container { margin-bottom: 20px; }

        .progress-bar {
            height: 8px;
            background-color: #eee;
            border-radius: 4px;
            overflow: hidden;
            margin-top: 5px;
        }

        .progress-fill {
            height: 100%;
            background-color: var(--primary);
            width: 0%;
            transition: width 0.3s ease;
        }

        .stats-row {
            display: flex;
            justify-content: space-between;
            font-size: 14px;
            color: #7f8c8d;
            font-weight: 600;
            margin-top: 5px;
        }

        .card-area {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px 20px;
            border-radius: 15px;
            margin-bottom: 20px;
            position: relative;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            box-shadow: 0 8px 20px rgba(102, 126, 234, 0.3);
        }

        .question-badge {
            position: absolute;
            top: 15px;
            font-size: 10px;
            background: rgba(0,0,0,0.25);
            padding: 5px 15px;
            border-radius: 20px;
            letter-spacing: 1px;
            text-transform: uppercase;
            font-weight: bold;
        }

        .word-display {
            font-size: 32px;
            font-weight: 800;
            margin: 10px 0;
            line-height: 1.3;
            word-wrap: break-word;
        }

        .options-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 15px;
        }

        button.option-btn {
            background-color: white;
            border: 2px solid #eef2f7;
            padding: 15px 5px;
            border-radius: 12px;
            cursor: pointer;
            font-size: 15px;
            color: var(--text);
            font-weight: 600;
            min-height: 70px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.1s, background-color 0.2s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.02);
            -webkit-tap-highlight-color: transparent;
        }

        button.option-btn:active { transform: scale(0.98); }

        button.option-btn.correct {
            background-color: var(--success);
            color: white;
            border-color: var(--success);
        }

        button.option-btn.wrong {
            background-color: var(--error);
            color: white;
            border-color: var(--error);
        }

        .next-btn {
            width: 100%;
            padding: 15px;
            background-color: var(--text);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            display: none;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--dark-overlay);
            z-index: 100;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(5px);
        }

        .modal-content {
            background: white;
            width: 90%;
            max-width: 400px;
            padding: 25px;
            border-radius: 20px;
            position: relative;
            max-height: 90vh;
            overflow-y: auto;
        }

        .close-modal {
            position: absolute;
            right: 20px;
            top: 20px;
            font-size: 24px;
            cursor: pointer;
            color: #aaa;
        }

        .form-group {
            margin-bottom: 15px;
            text-align: left;
        }

        .form-group label {
            display: block;
            margin-bottom: 5px;
            font-size: 12px;
            color: #7f8c8d;
            font-weight: bold;
        }

        .form-group input, .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 2px solid #eef2f7;
            border-radius: 8px;
            font-size: 16px;
            box-sizing: border-box;
        }
        
        .form-group textarea {
            height: 100px;
            font-family: monospace;
            font-size: 12px;
        }

        .action-btn {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            margin-bottom: 10px;
            cursor: pointer;
        }

        .btn-primary { background-color: var(--primary); color: white; }
        .btn-secondary { background-color: #eee; color: #333; }
        .btn-danger { background-color: #ff7675; color: white; margin-top:20px;}

        .tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 2px solid #eee;
        }
        .tab {
            flex: 1;
            padding: 10px;
            cursor: pointer;
            font-weight: bold;
            color: #999;
        }
        .tab.active {
            color: var(--primary);
            border-bottom: 2px solid var(--primary);
            margin-bottom: -2px;
        }
        
        .tab-content { display: none; }
        .tab-content.active { display: block; }

        @media (max-width: 480px) {
            .options-grid { grid-template-columns: 1fr; }
            .container { padding: 15px; min-height: 95vh; }
        }
    </style>
</head>
<body>

<div class="container">
    <div class="header-bar">
        <h1>YDS Kelime Avcƒ±sƒ±</h1>
        <button class="settings-btn" onclick="openModal()">+</button>
    </div>
    
    <div id="gameScreen">
        <div class="progress-container">
            <div class="stats-row">
                <span id="score">Puan: 0</span>
                <span id="counter">0 / 0</span>
            </div>
            <div class="progress-bar">
                <div class="progress-fill" id="progressFill"></div>
            </div>
        </div>

        <div class="card-area">
            <div class="question-badge" id="qType">Soru Tipi</div>
            <div class="word-display" id="mainWord">Y√ºkleniyor...</div>
        </div>

        <div class="options-grid" id="optionsArea"></div>

        <button class="next-btn" id="nextBtn" onclick="nextQuestion()">Sonraki</button>
    </div>

    <div id="resultScreen" style="display:none; flex-direction:column; justify-content:center; flex:1;">
        <h2 style="font-size: 3rem; margin:0;">üèÅ</h2>
        <h2>Test Bitti!</h2>
        <div style="font-size:48px; font-weight:bold; color:var(--primary); margin:20px 0;" id="finalScore">0</div>
        <p id="resultFeedback" style="color:#7f8c8d; margin-bottom:30px;"></p>
        <button class="action-btn btn-primary" onclick="initGame()">Tekrar Oyna</button>
    </div>
</div>

<div id="settingsModal" class="modal">
    <div class="modal-content">
        <span class="close-modal" onclick="closeModal()">&times;</span>
        <h2>Kelime Y√∂netimi</h2>
        
        <div class="tabs">
            <div class="tab active" onclick="switchTab('manuel')">Tek Ekle</div>
            <div class="tab" onclick="switchTab('toplu')">Toplu (JSON)</div>
        </div>

        <div id="tab-manuel" class="tab-content active">
            <div class="form-group">
                <label>ƒ∞ngilizce Kelime</label>
                <input type="text" id="inputEn" placeholder="√ñrn: Abundant">
            </div>
            <div class="form-group">
                <label>T√ºrk√ße Anlamƒ±</label>
                <input type="text" id="inputTr" placeholder="√ñrn: Bol, bereketli">
            </div>
            <div class="form-group">
                <label>E≈ü Anlamlƒ±sƒ± (Varsa)</label>
                <input type="text" id="inputSyn" placeholder="√ñrn: Plentiful, Ample">
            </div>
            <button class="action-btn btn-primary" onclick="addSingleWord()">Listeye Ekle ve Kaydet</button>
        </div>

        <div id="tab-toplu" class="tab-content">
            <div class="form-group">
                <label>JSON Verisi Yapƒ±≈ütƒ±r</label>
                <textarea id="jsonInput" placeholder='[{"en":"Word","tr":"Anlam","syn":"Synonym"}]'></textarea>
            </div>
            <button class="action-btn btn-primary" onclick="importJson()">Verileri ƒ∞√ße Aktar</button>
            <div class="form-group" style="margin-top:20px; border-top:1px solid #eee; padding-top:20px;">
                <label>Mevcut Kelime Sayƒ±sƒ±: <span id="totalWordCount">0</span></label>
                <button class="action-btn btn-danger" onclick="resetData()">T√ºm Verileri Sƒ±fƒ±rla (Fabrika Ayarlarƒ±)</button>
            </div>
        </div>
    </div>
</div>

<script>
    // --- BURAYA SENƒ∞N T√úM KELƒ∞MELERƒ∞Nƒ∞ G√ñMD√úM ---
    const defaultWords = [
        // TABLO 1
        { en: "Important", tr: "√ñnemli", syn: "Crucial, Critical, Vital, Significant" },
        { en: "Crucial", tr: "√ñnemli", syn: "Important, Critical, Vital, Significant" },
        { en: "Critical", tr: "√ñnemli", syn: "Important, Crucial, Vital, Significant" },
        { en: "Vital", tr: "√ñnemli", syn: "Important, Crucial, Critical, Significant" },
        { en: "Significant", tr: "√ñnemli", syn: "Important, Crucial, Critical, Vital" },
        { en: "Central", tr: "√ñnemli (Merkezi)", syn: "Fundamental, Main, Important" },
        { en: "Necessary", tr: "Gerekli", syn: "Needed, Required, Essential" },
        { en: "Needed", tr: "Gerekli", syn: "Necessary, Required" },
        { en: "Required", tr: "Gerekli", syn: "Necessary, Needed" },
        { en: "Fundamental", tr: "Temel", syn: "Basic, Essential" },
        { en: "Basic", tr: "Temel", syn: "Fundamental, Essential" },
        { en: "Essential", tr: "Temel / Gerekli", syn: "Fundamental, Basic, Necessary" },
        { en: "Mandatory", tr: "Zorunlu", syn: "Obligatory, Compulsory, Enforced" },
        { en: "Obligatory", tr: "Zorunlu", syn: "Mandatory, Compulsory" },
        { en: "Compulsory", tr: "Zorunlu", syn: "Mandatory, Obligatory" },
        { en: "Enforced", tr: "Zorunlu (Dayatƒ±lmƒ±≈ü)", syn: "Mandatory, Compulsory" },
        { en: "Strange", tr: "Tuhaf / Garip", syn: "Weird, Odd, Bizarre, Peculiar" },
        { en: "Weird", tr: "Tuhaf / Garip", syn: "Strange, Odd, Bizarre" },
        { en: "Odd", tr: "Tuhaf / Garip", syn: "Strange, Weird, Peculiar" },
        { en: "Bizarre", tr: "Tuhaf / Garip", syn: "Strange, Weird, Odd" },
        { en: "Peculiar", tr: "Tuhaf / Garip", syn: "Strange, Odd, Weird" },
        { en: "Ridiculous", tr: "Sa√ßma", syn: "Absurd, Irrational, Silly" },
        { en: "Absurd", tr: "Abs√ºrt / Sa√ßma", syn: "Ridiculous, Irrational" },
        { en: "Irrational", tr: "Mantƒ±ksƒ±z / Sa√ßma", syn: "Illogical, Absurd" },
        { en: "Silly", tr: "Aptalca / Sa√ßma", syn: "Ridiculous, Foolish" },
        { en: "Fantastic", tr: "Harika", syn: "Wonderful, Excellent, Superb" },
        { en: "Wonderful", tr: "Harika", syn: "Fantastic, Excellent, Outstanding" },
        { en: "Excellent", tr: "M√ºkemmel", syn: "Outstanding, Superb, Fantastic" },
        { en: "Outstanding", tr: "Olaƒüan√ºst√º / Se√ßkin", syn: "Extraordinary, Excellent" },
        { en: "Extraordinary", tr: "Olaƒüan√ºst√º", syn: "Outstanding, Exceptional" },
        { en: "Superb", tr: "M√ºkemmel / Harika", syn: "Excellent, Fantastic" },
        { en: "Abundant", tr: "Bol / √áok miktarda", syn: "Plentiful, Ample, Numerous" },
        { en: "Numerous", tr: "Sayƒ±sƒ±z / √áok", syn: "Many, Abundant" },
        { en: "Plentiful", tr: "Bol", syn: "Abundant, Ample" },
        { en: "Ample", tr: "Bol / Yeterli", syn: "Abundant, Plentiful" },
        { en: "Considerable", tr: "√ñnemli √∂l√ß√ºde / Epey", syn: "Substantial, Significant" },
        { en: "Substantial", tr: "√ñnemli √∂l√ß√ºde / B√ºy√ºk", syn: "Considerable, Large" },
        { en: "Few", tr: "Az", syn: "Little, Meagre" },
        { en: "Little", tr: "Az / K√º√ß√ºk", syn: "Few, Small" },
        { en: "Meagre", tr: "Az / Yetersiz", syn: "Scant, Limited" },
        { en: "Low", tr: "D√º≈ü√ºk / Az", syn: "Small, Little" },
        { en: "Scarce", tr: "Ender / Kƒ±t", syn: "Rare, Insufficient" },
        { en: "Rare", tr: "Nadir", syn: "Scarce, Uncommon" },
        { en: "Inadequate", tr: "Yetersiz", syn: "Insufficient, Limited" },
        { en: "Insufficient", tr: "Yetersiz", syn: "Inadequate, Short of" },
        { en: "Limited", tr: "Sƒ±nƒ±rlƒ±", syn: "Restricted, Confined" },
        { en: "Restricted", tr: "Kƒ±sƒ±tlƒ± / Sƒ±nƒ±rlƒ±", syn: "Limited, Constrained" },
        { en: "Short of", tr: "Eksik", syn: "Lack of, Wanting" },
        { en: "Lack of", tr: "Eksiklik / Yoksunluk", syn: "Shortage, Dearth" },
        { en: "Tiny", tr: "Ufak / Minik", syn: "Minute, Small" },
        { en: "Minute", tr: "Minik / √áok k√º√ß√ºk", syn: "Tiny, Microscopic" },
        { en: "Paltry", tr: "√ñnemsiz / Deƒüersiz", syn: "Insignificant, Meagre" },
        { en: "Insignificant", tr: "√ñnemsiz", syn: "Negligible, Unimportant" },
        { en: "Negligible", tr: "ƒ∞hmal edilebilir", syn: "Insignificant, Trivial" },
        { en: "Brief", tr: "Kƒ±sa / √ñz", syn: "Short, Concise" },
        { en: "Short", tr: "Kƒ±sa", syn: "Brief, Concise" },
        { en: "Concise", tr: "Kƒ±sa ve √∂z", syn: "Brief, Short" },

        // TABLO 2
        { en: "Huge", tr: "B√ºy√ºk / Devasa", syn: "Immense, Giant, Vast, Enormous" },
        { en: "Immense", tr: "Muazzam", syn: "Huge, Enormous, Vast" },
        { en: "Giant", tr: "Dev", syn: "Gigantic, Huge, Colossal" },
        { en: "Gigantic", tr: "Devasa", syn: "Giant, Huge, Enormous" },
        { en: "Vast", tr: "Geni≈ü / B√ºy√ºk", syn: "Huge, Immense, Extensive" },
        { en: "Enormous", tr: "Kocaman", syn: "Huge, Immense, Giant" },
        { en: "Profound", tr: "Derin (Etki/Anlam)", syn: "Deep, Intense" },
        { en: "Deep", tr: "Derin", syn: "Profound, Bottomless" },
        { en: "Separate", tr: "Ayrƒ±", syn: "Distinct, Disconnected" },
        { en: "Distinct", tr: "Belirgin / Ayrƒ±", syn: "Separate, Different, Clear" },
        { en: "Different", tr: "Farklƒ±", syn: "Distinct, Dissimilar" },
        { en: "Noticeable", tr: "Fark edilebilir", syn: "Distinct, Obvious, Visible" },
        { en: "Divergent", tr: "Farklƒ± / Ayrƒ±lan", syn: "Different, Deviating" },
        { en: "Diverse", tr: "√áe≈üitli", syn: "Various, Varied" },
        { en: "Various", tr: "√áe≈üitli", syn: "Diverse, Several" },
        { en: "Several", tr: "Birka√ß / √áe≈üitli", syn: "Various, Some" },
        { en: "Evident", tr: "A√ßƒ±k / Belirgin", syn: "Clear, Apparent, Obvious" },
        { en: "Clear", tr: "Net / A√ßƒ±k", syn: "Evident, Apparent, Obvious" },
        { en: "Apparent", tr: "A≈üikar / G√∂r√ºn√ºr", syn: "Evident, Obvious, Clear" },
        { en: "Obvious", tr: "Bariz / Ortada", syn: "Evident, Clear, Apparent" },
        { en: "Shining", tr: "Parlayan", syn: "Luminous, Gleaming, Bright" },
        { en: "Luminous", tr: "I≈üƒ±klƒ± / Parlak", syn: "Shining, Glowing" },
        { en: "Gleaming", tr: "Parƒ±ltƒ±lƒ±", syn: "Shining, Luminous" },
        { en: "Lively", tr: "Canlƒ± / Hayat dolu", syn: "Vibrant, Vivid, Energetic" },
        { en: "Vibrant", tr: "Canlƒ± / Titre≈üimli", syn: "Lively, Vivid" },
        { en: "Vivid", tr: "Canlƒ± (Renk/Anƒ±)", syn: "Bright, Clear, Lively" },
        { en: "Visible", tr: "G√∂r√ºlebilir", syn: "Noticeable, Observable" },
        { en: "Observable", tr: "G√∂zlemlenebilir", syn: "Visible, Noticeable" },
        { en: "Bright", tr: "Parlak", syn: "Shining, Luminous, Vivid" },
        { en: "Invaluable", tr: "Paha bi√ßilemez", syn: "Priceless, Precious" },
        { en: "Valuable", tr: "Deƒüerli", syn: "Precious, Worthwhile" },
        { en: "Priceless", tr: "Paha bi√ßilemez", syn: "Invaluable, Precious" },
        { en: "Precious", tr: "Kƒ±ymetli", syn: "Valuable, Cherished" },
        { en: "Bankrupt", tr: "ƒ∞flas etmi≈ü", syn: "Broke, Penniless, Insolvent" },
        { en: "Broke", tr: "Parasƒ±z / Be≈ü parasƒ±z", syn: "Penniless, Bankrupt" },
        { en: "Penniless", tr: "Parasƒ±z", syn: "Broke, Destitute" },
        { en: "Feasible", tr: "Yapƒ±labilir", syn: "Viable, Practical, Possible" },
        { en: "Viable", tr: "Uygulanabilir / Ya≈üayabilir", syn: "Feasible, Practical" },
        { en: "Practical", tr: "Pratik / Kullanƒ±≈ülƒ±", syn: "Feasible, Functional" },
        { en: "Applicable", tr: "Uygulanabilir", syn: "Relevant, Suitable" },
        { en: "Profitable", tr: "Karlƒ±", syn: "Lucrative, Gainful" },
        { en: "Lucrative", tr: "Kazan√ßlƒ±", syn: "Profitable, Gainful" },
        { en: "Gainful", tr: "Kazan√ßlƒ±", syn: "Profitable, Paying" },
        { en: "Innovative", tr: "Yenilik√ßi", syn: "Inventive, Creative" },
        { en: "Inventive", tr: "Yaratƒ±cƒ±", syn: "Innovative, Creative" },
        { en: "Pioneering", tr: "√ñnc√º", syn: "Innovative, Leading" },
        { en: "Competent", tr: "Yetkin", syn: "Qualified, Capable, Skilled" },
        { en: "Qualified", tr: "Nitelikli", syn: "Competent, Certified" },
        { en: "Capable of", tr: "Yetenekli / -e muktedir", syn: "Able to, Competent" },
        { en: "Skilled", tr: "Becerikli", syn: "Expert, Proficient" },
        { en: "Appropriate", tr: "Uygun", syn: "Suitable, Proper, Fit" },
        { en: "Fit", tr: "Uygun / Zinde", syn: "Suitable, Appropriate" },
        { en: "Proper", tr: "D√ºzg√ºn / Uygun", syn: "Appropriate, Correct" },
        { en: "Suitable", tr: "Elveri≈üli / Uygun", syn: "Appropriate, Right" }
    ];

    // Kayƒ±t adƒ±nƒ± deƒüi≈ütirdim ki eski 10 kelimelik kayƒ±tla karƒ±≈ümasƒ±n.
    // Otomatik olarak yeni 'full' listeyi y√ºkleyecek.
    const STORAGE_KEY = 'ydsKelimeleri_full'; 

    let kelimeListesi = [];
    let gameData = {
        questionOrder: [],
        currentIndex: 0,
        score: 0,
        isActive: true,
        currentQuestion: {}
    };

    function loadData() {
        const storedData = localStorage.getItem(STORAGE_KEY);
        if (storedData) {
            kelimeListesi = JSON.parse(storedData);
        } else {
            kelimeListesi = [...defaultWords];
            saveData(false); // Varsayƒ±lanlarƒ± kaydet ama uyarƒ± verme
        }
        document.getElementById('totalWordCount').innerText = kelimeListesi.length;
    }

    function saveData(showAlert = true) {
        localStorage.setItem(STORAGE_KEY, JSON.stringify(kelimeListesi));
        document.getElementById('totalWordCount').innerText = kelimeListesi.length;
        if(showAlert) alert("Kelimeler ba≈üarƒ±yla kaydedildi!");
    }

    function resetData() {
        if(confirm("T√ºm veriler fabrika ayarlarƒ±na d√∂necek. Emin misin?")) {
            localStorage.removeItem(STORAGE_KEY);
            loadData();
            initGame();
            closeModal();
            alert("Veriler sƒ±fƒ±rlandƒ±. T√ºm kelimeler geri y√ºklendi.");
        }
    }

    function addSingleWord() {
        const en = document.getElementById('inputEn').value.trim();
        const tr = document.getElementById('inputTr').value.trim();
        const syn = document.getElementById('inputSyn').value.trim();

        if (!en || !tr) {
            alert("L√ºtfen en az ƒ∞ngilizce ve T√ºrk√ße alanlarƒ±nƒ± doldur.");
            return;
        }

        kelimeListesi.push({ en, tr, syn });
        saveData();
        
        document.getElementById('inputEn').value = '';
        document.getElementById('inputTr').value = '';
        document.getElementById('inputSyn').value = '';
        
        if(confirm("Kelime eklendi. Testi yeni kelimeyle yeniden ba≈ülatmak ister misin?")) {
            initGame();
            closeModal();
        }
    }

    function importJson() {
        try {
            const raw = document.getElementById('jsonInput').value;
            const newData = JSON.parse(raw);
            if(Array.isArray(newData)) {
                kelimeListesi = kelimeListesi.concat(newData);
                saveData();
                document.getElementById('jsonInput').value = '';
                if(confirm(`${newData.length} adet kelime eklendi! Testi yeniden ba≈ülat?`)) {
                    initGame();
                    closeModal();
                }
            } else {
                alert("Ge√ßersiz format. Bir dizi (array) olmalƒ±.");
            }
        } catch (e) {
            alert("Hatalƒ± JSON formatƒ±. L√ºtfen kodu kontrol et.");
        }
    }

    function initGame() {
        loadData();
        document.getElementById('gameScreen').style.display = 'block';
        document.getElementById('resultScreen').style.display = 'none';
        
        gameData.score = 0;
        gameData.currentIndex = 0;
        gameData.isActive = true;

        gameData.questionOrder = Array.from({length: kelimeListesi.length}, (_, i) => i);
        gameData.questionOrder.sort(() => Math.random() - 0.5);

        updateUI();
        nextQuestion();
    }

    function updateUI() {
        document.getElementById('score').innerText = `Puan: ${gameData.score}`;
        document.getElementById('counter').innerText = `${gameData.currentIndex} / ${kelimeListesi.length}`;
        const percent = (gameData.currentIndex / kelimeListesi.length) * 100;
        document.getElementById('progressFill').style.width = `${percent}%`;
    }

    function nextQuestion() {
        if (gameData.currentIndex >= kelimeListesi.length) {
            finishGame();
            return;
        }

        gameData.isActive = true;
        document.getElementById('nextBtn').style.display = 'none';
        updateUI();

        const listIndex = gameData.questionOrder[gameData.currentIndex];
        const wordObj = kelimeListesi[listIndex];
        
        const hasSyn = wordObj.syn && wordObj.syn.length > 2;
        const mode = (Math.random() > 0.5 && hasSyn) ? 'syn' : 'tr';
        
        gameData.currentQuestion = {
            word: wordObj.en,
            correctAnswer: mode === 'tr' ? wordObj.tr : wordObj.syn,
            mode: mode,
            fullObj: wordObj
        };

        document.getElementById('mainWord').innerText = gameData.currentQuestion.word;
        const badge = document.getElementById('qType');
        
        if(mode === 'tr') {
            badge.innerText = "T√ºrk√ße Anlamƒ±";
            badge.style.backgroundColor = "#e67e22";
        } else {
            badge.innerText = "E≈ü Anlamlƒ±sƒ±";
            badge.style.backgroundColor = "#9b59b6";
        }

        generateOptions(wordObj, mode);
    }

    function generateOptions(correctObj, mode) {
        const area = document.getElementById('optionsArea');
        area.innerHTML = '';

        let options = [];
        let correctText = "";

        if (mode === 'syn') {
            const syns = correctObj.syn.split(',');
            correctText = syns[Math.floor(Math.random() * syns.length)].trim();
        } else {
            correctText = correctObj.tr;
        }
        
        gameData.currentQuestion.correctText = correctText;
        options.push(correctText);

        let safetyCounter = 0;
        while(options.length < 4 && safetyCounter < 100) {
            safetyCounter++;
            const randomObj = kelimeListesi[Math.floor(Math.random() * kelimeListesi.length)];
            let distractor = "";

            if(mode === 'tr') {
                distractor = randomObj.tr;
            } else {
                distractor = randomObj.syn ? randomObj.syn.split(',')[0].trim() : randomObj.en;
            }

            if(!options.includes(distractor) && distractor !== correctText) {
                if(mode === 'syn' && correctObj.syn.includes(distractor)) continue;
                options.push(distractor);
            }
        }

        options.sort(() => Math.random() - 0.5);

        options.forEach(opt => {
            const btn = document.createElement('button');
            btn.className = 'option-btn';
            btn.innerText = opt;
            btn.onclick = () => checkAnswer(btn, opt);
            area.appendChild(btn);
        });
    }

    function checkAnswer(btn, answer) {
        if (!gameData.isActive) return;
        gameData.isActive = false;

        const isCorrect = answer === gameData.currentQuestion.correctText;
        const allBtns = document.querySelectorAll('.option-btn');

        if (isCorrect) {
            btn.classList.add('correct');
            gameData.score += 10;
        } else {
            btn.classList.add('wrong');
            allBtns.forEach(b => {
                if(b.innerText === gameData.currentQuestion.correctText) b.classList.add('correct');
            });
        }

        gameData.currentIndex++;
        document.getElementById('score').innerText = `Puan: ${gameData.score}`;
        document.getElementById('nextBtn').style.display = 'block';
    }

    function finishGame() {
        document.getElementById('gameScreen').style.display = 'none';
        const resScreen = document.getElementById('resultScreen');
        resScreen.style.display = 'flex';
        
        document.getElementById('finalScore').innerText = gameData.score;
        
        const max = kelimeListesi.length * 10;
        const ratio = gameData.score / max;
        let msg = "√áalƒ±≈ümaya devam!";
        if(ratio > 0.9) msg = "Efsanevi Performans! üèÜ";
        else if(ratio > 0.7) msg = "Gayet Ba≈üarƒ±lƒ±! üëè";
        else if(ratio > 0.5) msg = "ƒ∞yi gidiyorsun, tekrar yap. üëç";
        
        document.getElementById('resultFeedback').innerText = msg;
    }

    function openModal() { document.getElementById('settingsModal').style.display = 'flex'; }
    function closeModal() { document.getElementById('settingsModal').style.display = 'none'; }
    
    function switchTab(tabName) {
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
        
        if(tabName === 'manuel') {
            document.querySelectorAll('.tab')[0].classList.add('active');
            document.getElementById('tab-manuel').classList.add('active');
        } else {
            document.querySelectorAll('.tab')[1].classList.add('active');
            document.getElementById('tab-toplu').classList.add('active');
        }
    }

    window.onclick = function(event) {
        if (event.target == document.getElementById('settingsModal')) {
            closeModal();
        }
    }

    initGame(); 

</script>
</body>
</html>
